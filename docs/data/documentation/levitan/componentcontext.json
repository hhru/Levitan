{"sections":[],"kind":"symbol","metadata":{"title":"ComponentContext","roleHeading":"Structure","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ComponentContext","kind":"identifier"}],"externalID":"s:7Levitan16ComponentContextV","navigatorTitle":[{"text":"ComponentContext","kind":"identifier"}],"symbolKind":"struct","role":"symbol","modules":[{"name":"Levitan"}]},"topicSections":[{"identifiers":["doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/componentLayoutInvalidation(_:)","doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/disabled(_:)","doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/environment(_:_:)","doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/transformEnvironment(_:transform:)"],"generated":true,"anchor":"Instance-Methods","title":"Instance Methods"},{"identifiers":["doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/subscript(dynamicMember:)-17wrw","doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/subscript(dynamicMember:)-610hq"],"generated":true,"anchor":"Subscripts","title":"Subscripts"},{"identifiers":["doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/default"],"generated":true,"anchor":"Type-Properties","title":"Type Properties"}],"primaryContentSections":[{"declarations":[{"tokens":[{"kind":"attribute","text":"@dynamicMemberLookup"},{"kind":"text","text":" "},{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ComponentContext"}],"platforms":["iOS"],"languages":["swift"]}],"kind":"declarations"},{"content":[{"type":"heading","level":2,"text":"Overview","anchor":"overview"},{"inlineContent":[{"type":"text","text":"Является универсальным окружением для UIKit и SwiftUI компонентов"},{"type":"text","text":" "},{"type":"text","text":"и предоставляет механизм переопределения его переменных."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Содержит изначальное окружение и отдельно переопределения его значений."},{"type":"text","text":" "},{"type":"text","text":"Такая структура позволяет наследовать полноценное окружение из SwiftUI,"},{"type":"text","text":" "},{"type":"text","text":"заменяя в нем только переопределенные значения."}],"type":"paragraph"},{"type":"heading","level":1,"text":"Начальный контекст","anchor":"%D0%9D%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9-%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%BA%D1%81%D1%82"},{"inlineContent":[{"text":"Если в прокте корневым является SwiftUI-компонент,","type":"text"},{"text":" ","type":"text"},{"text":"то нет необходимости создавать начальный контекст самостоятельно.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"В случае корневого UIKit-компонента контекст создается в нем через static-свойство ","type":"text"},{"code":"default","type":"codeVoice"},{"text":".","type":"text"},{"text":" ","type":"text"},{"text":"В этом случае некоторые переменные получают значения из UIKit-характеристик ","type":"text"},{"code":"UITraitCollection","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"},{"type":"heading","level":1,"text":"Использование в SwiftUI","anchor":"%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B2-SwiftUI"},{"inlineContent":[{"type":"text","text":"Для SwiftUI контекст компонента трансформируется в обычное окружение,"},{"text":" ","type":"text"},{"text":"и его использование ничем не отличается от использования в обычных UI-представлениях, например:","type":"text"}],"type":"paragraph"},{"code":["struct Foo: View {","","    @Environment(\\.isEnabled)","    private var isEnabled","","    var body: some View {","        Text(isEnabled ? \"Enabled\" : \"Disabled\")","            .dynamicTypeSize(.small) \/\/ переопределение переменной окружения","    }","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"Как видно из примера, переопределение происходит точно так же, как и с обычным UI-представлением.","type":"text"},{"text":" ","type":"text"},{"text":"Добавление новых переменных также аналогично стандартному механизму в SwiftUI.","type":"text"}],"type":"paragraph"},{"level":1,"text":"Использование в UIKit","anchor":"%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B2-UIKit","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"В случае UIKit-компонентов контекст используется напрямую,","type":"text"},{"text":" ","type":"text"},{"text":"UI-представление компонента получает его в методе обновления ","type":"text"},{"code":"update(with:context:)","type":"codeVoice"},{"text":", например:","type":"text"}]},{"type":"codeListing","code":["extension FooView: FallbackComponentView {","","    func update(with content: Foo, context: ComponentContext) {","        label.text = context.isEnabled ? \"Enabled\" : \"Disabled\"","    }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"Доступны все переменные окружения из SwiftUI, некоторые из них сами трансформируются в UIKit-характеристики,","type":"text"},{"text":" ","type":"text"},{"text":"например ","type":"text"},{"code":"dynamicTypeSize","type":"codeVoice"},{"text":" в ","type":"text"},{"code":"UITraitCollection.preferredContentSizeCategory","type":"codeVoice"},{"text":".","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Переопределение переменных в UIKit происходит через вызов соответствующих методов контекста, например:"}]},{"type":"codeListing","code":["extension FooView: ComponentView {","","    func update(with content: Foo, context: ComponentContext) {","        barView.update(","            with: Bar(),","            \/\/ переопределение переменной окружения","            context: context.dynamicTypeSize(.small)","        )","    }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"Добавление новых переменных также аналогично стандартному механизму в SwiftUI.","type":"text"}]},{"type":"aside","style":"note","name":"See Also","content":[{"type":"paragraph","inlineContent":[{"text":"","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/Component"}]}]},{"type":"aside","style":"note","name":"See Also","content":[{"type":"paragraph","inlineContent":[{"text":"","type":"text"},{"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponent","isActive":true,"type":"reference"}]}]},{"type":"aside","style":"note","name":"See Also","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"isActive":true,"type":"reference","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContextOverriding"}]}]},{"type":"aside","style":"note","name":"See Also","content":[{"inlineContent":[{"text":"","type":"text"},{"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ViewEnvironment","type":"reference","isActive":true}],"type":"paragraph"}]}],"kind":"content"}],"schemaVersion":{"minor":3,"patch":0,"major":0},"identifier":{"url":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Контекст компонента."}],"hierarchy":{"paths":[["doc:\/\/ru.hh.Levitan\/documentation\/Levitan"]]},"variants":[{"paths":["\/documentation\/levitan\/componentcontext"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://ru.hh.Levitan/documentation/Levitan/ViewEnvironment":{"type":"topic","title":"ViewEnvironment","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ViewEnvironment","kind":"identifier"}],"url":"\/documentation\/levitan\/viewenvironment","kind":"symbol","role":"symbol","abstract":[],"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ViewEnvironment","navigatorTitle":[{"text":"ViewEnvironment","kind":"identifier"}]},"doc://ru.hh.Levitan/documentation/Levitan/ComponentContextOverriding":{"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ComponentContextOverriding","kind":"identifier"}],"navigatorTitle":[{"text":"ComponentContextOverriding","kind":"identifier"}],"type":"topic","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContextOverriding","url":"\/documentation\/levitan\/componentcontextoverriding","role":"symbol","title":"ComponentContextOverriding","abstract":[{"type":"text","text":"Вспомогательная структура-функция для переопределения переменных контекста компонентов."}],"kind":"symbol"},"doc://ru.hh.Levitan/documentation/Levitan/ComponentContext/disabled(_:)":{"kind":"symbol","abstract":[{"type":"text","text":"Переопределяет переменную "},{"type":"codeVoice","code":"isEnabled"},{"type":"text","text":" аналогично переопределению в SwiftUI."}],"type":"topic","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"disabled","kind":"identifier"},{"text":"(","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"ComponentContext","preciseIdentifier":"s:7Levitan16ComponentContextV","kind":"typeIdentifier"}],"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/disabled(_:)","title":"disabled(_:)","url":"\/documentation\/levitan\/componentcontext\/disabled(_:)","role":"symbol"},"doc://ru.hh.Levitan/documentation/Levitan/ComponentContext/subscript(dynamicMember:)-17wrw":{"type":"topic","role":"symbol","fragments":[{"kind":"keyword","text":"subscript"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Value"},{"kind":"text","text":">("},{"kind":"externalParam","text":"dynamicMember"},{"kind":"text","text":" _: "},{"preciseIdentifier":"s:s15WritableKeyPathC","kind":"typeIdentifier","text":"WritableKeyPath"},{"kind":"text","text":"<"},{"preciseIdentifier":"s:7SwiftUI17EnvironmentValuesV","kind":"typeIdentifier","text":"EnvironmentValues"},{"kind":"text","text":", "},{"preciseIdentifier":"s:7Levitan16ComponentContextV13dynamicMemberAA0bC10OverridingVyxGs15WritableKeyPathCy7SwiftUI17EnvironmentValuesVxG_tcluip5ValueL_xmfp","kind":"typeIdentifier","text":"Value"},{"kind":"text","text":">) -> "},{"kind":"typeIdentifier","text":"ComponentContextOverriding","preciseIdentifier":"s:7Levitan26ComponentContextOverridingV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Value","preciseIdentifier":"s:7Levitan16ComponentContextV13dynamicMemberAA0bC10OverridingVyxGs15WritableKeyPathCy7SwiftUI17EnvironmentValuesVxG_tcluip5ValueL_xmfp"},{"kind":"text","text":">"}],"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/subscript(dynamicMember:)-17wrw","abstract":[{"text":"Создает вспомогательную структуру-функцию для переопределения переменной окружения.","type":"text"}],"title":"subscript(dynamicMember:)","kind":"symbol","url":"\/documentation\/levitan\/componentcontext\/subscript(dynamicmember:)-17wrw"},"doc://ru.hh.Levitan/documentation/Levitan/ComponentContext/transformEnvironment(_:transform:)":{"role":"symbol","type":"topic","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"transformEnvironment","kind":"identifier"},{"text":"<","kind":"text"},{"text":"Value","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"WritableKeyPath","preciseIdentifier":"s:s15WritableKeyPathC","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"EnvironmentValues","preciseIdentifier":"s:7SwiftUI17EnvironmentValuesV","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Value","preciseIdentifier":"s:7Levitan16ComponentContextV20transformEnvironment_0D0ACs15WritableKeyPathCy7SwiftUI0E6ValuesVxG_yxzctlF5ValueL_xmfp","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"text":"transform","kind":"externalParam"},{"text":": (","kind":"text"},{"text":"inout","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Value","preciseIdentifier":"s:7Levitan16ComponentContextV20transformEnvironment_0D0ACs15WritableKeyPathCy7SwiftUI0E6ValuesVxG_yxzctlF5ValueL_xmfp","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"Void","preciseIdentifier":"s:s4Voida","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"ComponentContext","preciseIdentifier":"s:7Levitan16ComponentContextV","kind":"typeIdentifier"}],"title":"transformEnvironment(_:transform:)","kind":"symbol","url":"\/documentation\/levitan\/componentcontext\/transformenvironment(_:transform:)","abstract":[{"text":"Переопределяет переменную с заданным ключом, используя замыкание для модификации его значения.","type":"text"}],"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/transformEnvironment(_:transform:)"},"doc://ru.hh.Levitan/documentation/Levitan/ComponentContext":{"kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ComponentContext","kind":"identifier"}],"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext","abstract":[{"type":"text","text":"Контекст компонента."}],"role":"symbol","title":"ComponentContext","type":"topic","url":"\/documentation\/levitan\/componentcontext","navigatorTitle":[{"text":"ComponentContext","kind":"identifier"}]},"doc://ru.hh.Levitan/documentation/Levitan":{"url":"\/documentation\/levitan","kind":"symbol","role":"collection","title":"Levitan","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan","type":"topic","abstract":[]},"doc://ru.hh.Levitan/documentation/Levitan/ComponentContext/subscript(dynamicMember:)-610hq":{"kind":"symbol","fragments":[{"text":"subscript","kind":"keyword"},{"text":"<","kind":"text"},{"text":"Value","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"dynamicMember","kind":"externalParam"},{"text":" _: ","kind":"text"},{"text":"KeyPath","preciseIdentifier":"s:s7KeyPathC","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"EnvironmentValues","preciseIdentifier":"s:7SwiftUI17EnvironmentValuesV","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Value","preciseIdentifier":"s:7Levitan16ComponentContextV13dynamicMemberxs7KeyPathCy7SwiftUI17EnvironmentValuesVxG_tcluip5ValueL_xmfp","kind":"typeIdentifier"},{"text":">) -> ","kind":"text"},{"text":"Value","preciseIdentifier":"s:7Levitan16ComponentContextV13dynamicMemberxs7KeyPathCy7SwiftUI17EnvironmentValuesVxG_tcluip5ValueL_xmfp","kind":"typeIdentifier"}],"role":"symbol","title":"subscript(dynamicMember:)","abstract":[{"text":"Извлекает значение для заданного ключа переменной окружения.","type":"text"}],"url":"\/documentation\/levitan\/componentcontext\/subscript(dynamicmember:)-610hq","type":"topic","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/subscript(dynamicMember:)-610hq"},"doc://ru.hh.Levitan/documentation/Levitan/Component":{"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Component"}],"navigatorTitle":[{"kind":"identifier","text":"Component"}],"title":"Component","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/Component","type":"topic","url":"\/documentation\/levitan\/component","abstract":[{"text":"Общий протокол для всех UI-компонентов.","type":"text"}],"role":"symbol","kind":"symbol"},"doc://ru.hh.Levitan/documentation/Levitan/ComponentContext/default":{"kind":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"let","kind":"keyword"},{"text":" ","kind":"text"},{"text":"`default`","kind":"identifier"},{"text":": ","kind":"text"},{"text":"ComponentContext","preciseIdentifier":"s:7Levitan16ComponentContextV","kind":"typeIdentifier"}],"role":"symbol","title":"default","abstract":[{"type":"text","text":"Контекст по умолчанию."}],"url":"\/documentation\/levitan\/componentcontext\/default","type":"topic","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/default"},"doc://ru.hh.Levitan/documentation/Levitan/FallbackComponent":{"title":"FallbackComponent","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"FallbackComponent","kind":"identifier"}],"type":"topic","url":"\/documentation\/levitan\/fallbackcomponent","navigatorTitle":[{"text":"FallbackComponent","kind":"identifier"}],"kind":"symbol","role":"symbol","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponent","abstract":[{"text":"Протокол для UIKit-компонентов.","type":"text"}]},"doc://ru.hh.Levitan/documentation/Levitan/ComponentContext/environment(_:_:)":{"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/environment(_:_:)","kind":"symbol","url":"\/documentation\/levitan\/componentcontext\/environment(_:_:)","role":"symbol","title":"environment(_:_:)","type":"topic","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"environment","kind":"identifier"},{"text":"<","kind":"text"},{"text":"Value","kind":"genericParameter"},{"text":">(","kind":"text"},{"preciseIdentifier":"s:s15WritableKeyPathC","text":"WritableKeyPath","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:7SwiftUI17EnvironmentValuesV","text":"EnvironmentValues","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"preciseIdentifier":"s:7Levitan16ComponentContextV11environmentyACs15WritableKeyPathCy7SwiftUI17EnvironmentValuesVxG_xtlF5ValueL_xmfp","text":"Value","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"preciseIdentifier":"s:7Levitan16ComponentContextV11environmentyACs15WritableKeyPathCy7SwiftUI17EnvironmentValuesVxG_xtlF5ValueL_xmfp","text":"Value","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:7Levitan16ComponentContextV","text":"ComponentContext","kind":"typeIdentifier"}],"abstract":[{"type":"text","text":"Переопределяет переменную с заданным ключом новым значением."}]},"doc://ru.hh.Levitan/documentation/Levitan/ComponentContext/componentLayoutInvalidation(_:)":{"kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"componentLayoutInvalidation","kind":"identifier"},{"text":"(() -> ","kind":"text"},{"text":"Void","preciseIdentifier":"s:s4Voida","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"ComponentContext","preciseIdentifier":"s:7Levitan16ComponentContextV","kind":"typeIdentifier"}],"role":"symbol","title":"componentLayoutInvalidation(_:)","abstract":[{"text":"Добавляет дополнительное действие для инвалидации лэйаута.","type":"text"}],"url":"\/documentation\/levitan\/componentcontext\/componentlayoutinvalidation(_:)","type":"topic","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext\/componentLayoutInvalidation(_:)"}}}