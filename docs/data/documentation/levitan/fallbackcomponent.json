{"hierarchy":{"paths":[["doc:\/\/ru.hh.Levitan\/documentation\/Levitan"]]},"sections":[],"primaryContentSections":[{"kind":"declarations","declarations":[{"languages":["swift"],"platforms":["iOS"],"tokens":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"FallbackComponent"},{"kind":"text","text":" : "},{"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/Component","kind":"typeIdentifier","preciseIdentifier":"s:7Levitan9ComponentP","text":"Component"},{"kind":"text","text":" "},{"kind":"keyword","text":"where"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/Component\/UIView","kind":"typeIdentifier","preciseIdentifier":"s:7Levitan9ComponentP6UIViewQa","text":"UIView"},{"kind":"text","text":" : "},{"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponentView","kind":"typeIdentifier","preciseIdentifier":"s:7Levitan21FallbackComponentViewP","text":"FallbackComponentView"}]}]},{"content":[{"type":"heading","anchor":"overview","text":"Overview","level":2},{"type":"paragraph","inlineContent":[{"text":"В UIKit-компонентах данные и UI-представление разделены,","type":"text"},{"text":" ","type":"text"},{"text":"и данный протокол ","type":"text"},{"code":"FallbackComponent","type":"codeVoice"},{"text":" используется для реализации слоя данных,","type":"text"},{"text":" ","type":"text"},{"text":"а для реализации UI-представления используется протокол ","type":"text"},{"code":"FallbackComponentView","type":"codeVoice"},{"text":", например:","type":"text"}]},{"type":"codeListing","code":["\/\/\/ Слой данных UIKit-компонента","struct Foo: FallbackComponent {","","    typealias UIView = FooView","","    let text: String","}","","\/\/\/ UI-представление UIKit-компонента","final class FooView: UIView {","","    private let label = UILabel()","","    override init(frame: CGRect) {","        super.init(frame: frame)","","        setupLabel()","    }","","    required init?(coder: NSCoder) {","        fatalError(\"init(coder:) has not been implemented\")","    }","","    private func setupLabel() {","        addSubview(label)","","        label.snp.makeConstraints { make in","            make.edges.equalToSuperview()","        }","    }","}","","extension FooView: FallbackComponentView {","","    static func sizing(","        for content: Content,","        fitting size: CGSize,","        context: ComponentContext","    ) -> ComponentSizing {","        ComponentSizing(","            width: .fill,","            height: .hug","        )","    }","","    func update(","        with content: Foo,","        context: ComponentContext","    ) {","        label.text = content.text","    }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Так как определение размеров - это зона ответственности UI-представления,"},{"type":"text","text":" "},{"type":"text","text":"то метод "},{"type":"codeVoice","code":"sizing(for:fitting:context:)"},{"type":"text","text":" реализуется именно в нем, а слой данных просто проксирует вызовы."}]},{"type":"paragraph","inlineContent":[{"text":"Любой UIKit-компонент, соответствующий этому протоколу ","type":"text"},{"type":"codeVoice","code":"FallbackComponent"},{"text":",","type":"text"},{"text":" ","type":"text"},{"text":"так же соответствует протоколу ","type":"text"},{"type":"codeVoice","code":"Component"},{"text":", поэтому так же может быть использован и в UIKit, и в SwiftUI.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"В качестве UI-представления для SwiftUI используется отдельная сущность - "},{"code":"FallbackComponentBody","type":"codeVoice"},{"type":"text","text":","},{"type":"text","text":" "},{"type":"text","text":"которая является универсальной реализацией протокола "},{"code":"UIViewRepresentable","type":"codeVoice"},{"type":"text","text":" для всех UIKit-компонентов."}]},{"type":"aside","style":"note","content":[{"inlineContent":[{"text":"","type":"text"},{"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponentView","isActive":true,"type":"reference"}],"type":"paragraph"}],"name":"See Also"},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponentBody","isActive":true,"type":"reference"}]}],"name":"See Also"},{"type":"aside","style":"note","content":[{"inlineContent":[{"type":"text","text":""},{"isActive":true,"type":"reference","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext"}],"type":"paragraph"}],"name":"See Also"},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/Component","type":"reference","isActive":true}]}],"name":"See Also"}],"kind":"content"}],"schemaVersion":{"patch":0,"major":0,"minor":3},"kind":"symbol","identifier":{"interfaceLanguage":"swift","url":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponent"},"topicSections":[{"title":"Default Implementations","identifiers":["doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponent\/View-Implementations"],"generated":true,"anchor":"Default-Implementations"}],"relationshipsSections":[{"type":"inheritsFrom","title":"Inherits From","kind":"relationships","identifiers":["doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/Component","doc:\/\/ru.hh.Levitan\/SQ","doc:\/\/ru.hh.Levitan\/7SwiftUI4ViewP"]},{"type":"inheritedBy","title":"Inherited By","kind":"relationships","identifiers":["doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackManualComponent"]},{"type":"conformingTypes","title":"Conforming Types","kind":"relationships","identifiers":["doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/Text"]}],"metadata":{"role":"symbol","title":"FallbackComponent","modules":[{"name":"Levitan"}],"roleHeading":"Protocol","externalID":"s:7Levitan17FallbackComponentP","symbolKind":"protocol","navigatorTitle":[{"kind":"identifier","text":"FallbackComponent"}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"FallbackComponent","kind":"identifier"}]},"variants":[{"paths":["\/documentation\/levitan\/fallbackcomponent"],"traits":[{"interfaceLanguage":"swift"}]}],"abstract":[{"type":"text","text":"Протокол для UIKit-компонентов."}],"references":{"doc://ru.hh.Levitan/documentation/Levitan/FallbackManualComponent":{"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackManualComponent","url":"\/documentation\/levitan\/fallbackmanualcomponent","abstract":[{"type":"text","text":"Частный случай "},{"type":"codeVoice","code":"FallbackComponent"},{"type":"text","text":" для UIKit-компонентов, который используют только стратегию"},{"type":"text","text":" "},{"type":"text","text":"с фиксированным размером."}],"title":"FallbackManualComponent","type":"topic","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"FallbackManualComponent"}],"navigatorTitle":[{"kind":"identifier","text":"FallbackManualComponent"}],"kind":"symbol","role":"symbol"},"doc://ru.hh.Levitan/documentation/Levitan/ComponentContext":{"kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ComponentContext","kind":"identifier"}],"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/ComponentContext","abstract":[{"type":"text","text":"Контекст компонента."}],"role":"symbol","title":"ComponentContext","type":"topic","url":"\/documentation\/levitan\/componentcontext","navigatorTitle":[{"text":"ComponentContext","kind":"identifier"}]},"doc://ru.hh.Levitan/documentation/Levitan/FallbackComponentView":{"kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"FallbackComponentView"}],"url":"\/documentation\/levitan\/fallbackcomponentview","role":"symbol","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponentView","type":"topic","title":"FallbackComponentView","abstract":[{"text":"Общий протокол для реализации UI-представления UIKit-компонентов.","type":"text"}],"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"FallbackComponentView"}]},"doc://ru.hh.Levitan/documentation/Levitan/Component":{"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Component"}],"navigatorTitle":[{"kind":"identifier","text":"Component"}],"title":"Component","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/Component","type":"topic","url":"\/documentation\/levitan\/component","abstract":[{"text":"Общий протокол для всех UI-компонентов.","type":"text"}],"role":"symbol","kind":"symbol"},"doc://ru.hh.Levitan/documentation/Levitan/Component/UIView":{"type":"topic","fragments":[{"text":"associatedtype","kind":"keyword"},{"text":" ","kind":"text"},{"text":"UIView","kind":"identifier"},{"text":" : ","kind":"text"},{"text":"ComponentView","kind":"typeIdentifier","preciseIdentifier":"s:7Levitan13ComponentViewP"},{"text":" = ","kind":"text"},{"text":"ComponentHostingView","kind":"typeIdentifier","preciseIdentifier":"s:7Levitan20ComponentHostingViewC"},{"text":"<","kind":"text"},{"text":"Self","kind":"typeIdentifier"},{"text":">","kind":"text"}],"role":"symbol","title":"UIView","abstract":[{"type":"text","text":"UIKit-представление компонента для использования в UIKit-контейнере."}],"url":"\/documentation\/levitan\/component\/uiview","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/Component\/UIView","kind":"symbol","required":true},"doc://ru.hh.Levitan/documentation/Levitan":{"url":"\/documentation\/levitan","kind":"symbol","role":"collection","title":"Levitan","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan","type":"topic","abstract":[]},"doc://ru.hh.Levitan/documentation/Levitan/FallbackComponent/View-Implementations":{"role":"collectionGroup","title":"View Implementations","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponent\/View-Implementations","abstract":[],"url":"\/documentation\/levitan\/fallbackcomponent\/view-implementations","kind":"article","type":"topic"},"doc://ru.hh.Levitan/7SwiftUI4ViewP":{"type":"unresolvable","identifier":"doc:\/\/ru.hh.Levitan\/7SwiftUI4ViewP","title":"SwiftUICore.View"},"doc://ru.hh.Levitan/documentation/Levitan/Text":{"url":"\/documentation\/levitan\/text","kind":"symbol","type":"topic","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"Text"}],"title":"Text","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/Text","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Text"}],"abstract":[]},"doc://ru.hh.Levitan/SQ":{"type":"unresolvable","identifier":"doc:\/\/ru.hh.Levitan\/SQ","title":"Swift.Equatable"},"doc://ru.hh.Levitan/documentation/Levitan/FallbackComponentBody":{"title":"FallbackComponentBody","role":"symbol","navigatorTitle":[{"text":"FallbackComponentBody","kind":"identifier"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"FallbackComponentBody","kind":"identifier"}],"identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponentBody","kind":"symbol","abstract":[{"type":"text","text":"SwiftUI-представление для UIKit-компонентов."}],"type":"topic","url":"\/documentation\/levitan\/fallbackcomponentbody"},"doc://ru.hh.Levitan/documentation/Levitan/FallbackComponent":{"title":"FallbackComponent","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"FallbackComponent","kind":"identifier"}],"type":"topic","url":"\/documentation\/levitan\/fallbackcomponent","navigatorTitle":[{"text":"FallbackComponent","kind":"identifier"}],"kind":"symbol","role":"symbol","identifier":"doc:\/\/ru.hh.Levitan\/documentation\/Levitan\/FallbackComponent","abstract":[{"text":"Протокол для UIKit-компонентов.","type":"text"}]}}}